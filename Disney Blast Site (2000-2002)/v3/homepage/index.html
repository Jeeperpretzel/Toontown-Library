<HTML>
<HEAD>
<TITLE>homepage</TITLE>
<script language="javascript" src="http://www.disneyblast.go.com/v3/global/javascript/cdn.js"></script>
<script language="javascript" src="http://www.disneyblast.go.com/v3/global/javascript/gamemanager_writer.js"></script>
<script src="http://disney.go.com/detect/scripts/master_flash_writer.js"></script>
<!-- START Hitbox / Breadcrumb Variables -->
<script language="javascript" type="text/javascript">
var bCrumbLevel_1 = "Disney Blast";
var bCrumbLevel_2 = "V3";
</script>
<!-- END Hitbox / Breadcrumb Variables -->  

<!-- START COOKIE CHECK -->
<script language="javascript" type="text/javascript">
teststring = cookieVal("hbx_isp").toLowerCase();
tempa = teststring.substring(0,1).toUpperCase();
tempb = teststring.substring(1, teststring.length);
ispstring = tempa + tempb;
    if(cookieVal("blast_connection") == "bb") {
        var my_mlc = "/registered/v3/"+ispstring+"/content/broadband/homepage/homepage"; //multi-level content category
    }else{
        var my_mlc = "/registered/v3/"+ispstring+"/content/narrowband/homepage/homepage"; //multi-level content category
    }
	//alert("my_mlc = "+my_mlc)
    var my_pn  = "homepage";    //page name(s)
</script>
<!-- END COOKIE CHECK -->

<!--WEBSIDESTORY CODE HBX(Global)(Universal)-->
<!--COPYRIGHT 1997-2004 WEBSIDESTORY,INC. ALL RIGHTS RESERVED. U.S.PATENT No. 6,393,479B1. MORE INFO:http://websidestory.com/privacy-->
<script SRC = "http://hb.disney.go.com/stat/hitboxcode.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
hitbox = new HB_CreateObject(my_mlc);
hitbox.HB_PlaceAccount("DM510717H8BB38EN3","DM510612FMNS38EN3","DM51030813MR38EN3","DM5103083LCA38EN3");
hitbox.HB_PlaceName(my_pn);
hitbox.HB_render();
</script>
<!--END WEBSIDESTORY CODE-->
<Script Language="VBScript">
on error resume next
var writeInstallObj
writeInstallObj = IsObject(CreateObject("DIGGameManager.GameManagerCtrl.1"))
</Script>
<script language="JavaScript">
<!--

// This cookie controls how the back button works on content pages (related to gazette links)
document.cookie = "insideBlast=true;path=/;domain=.go.com";
function popMiniWindow(url) {
	myname = "miniPop"
	w = "640"
	h = "480"
	var scroll = "yes"
	var winl = (screen.width - w) / 2;
	var wint = (screen.height - h) / 2;
	winprops = 'height='+h+',width='+w+',top='+wint+',left='+winl+',scrollbars='+scroll+','
	miniPop = window.open(url, myname, winprops, "no")
	if(miniPop!=null){
		miniPop.focus();
	}
}
function popWinners(swf,ww,hh){
	if(ww != undefined){
		w = ww;
		h = hh;
	}else{
		w = "450"
		h = "600"
	}
	var scroll = "yes"
	var winl = (screen.width - w) / 2;
	var wint = (screen.height - h) / 2;
	winprops = 'height='+h+',width='+w+',top='+wint+',left='+winl+',scrollbars='+scroll+','
	winnerPop = window.open(swf, "winnerWin", winprops, "no")
	if(winnerPop){
		winnerPop.focus();	
	}
}
var thisPage = unescape(window.location.pathname);
var needsproductlistupdate = false;
function abortExe()
{
    window.location.href = thisPage;
}

function abortExe()
{ 
    window.location.replace(thisPage);
}
function abortExe()
{
    window.location.reload(false);
}

function changeParentWindowLoc (user_type) {
	if (typeof(window.opener) == "object") {
		if (user_type == "directtrialer") {
			window.opener.location = "http://www.disneyblast.go.com/v3/index2.html?pc=directtrialer";
		} else {
			window.opener.location = "http://www.disneyblast.go.com/v3/index2.html";
		}
	}
}

function changeParentWindowAndClose (loc) {
    if (typeof(window.opener) == "object") {
            window.opener.location = loc;
            window.close();
    }
}
function changeUser(){
    if (typeof(window.opener) == "object") { 
		var tempstring = window.location.toString()
		var firstchar = tempstring.indexOf("http://www.disneyblast.go.com/") + 29
		var retstring = tempstring.substring(29, window.location.length)
		window.opener.focus();
		window.opener.reLogin(retstring);
		window.close();
    }
 	
}
function changeUserDMC(){
    if (typeof(window.opener) == "object") {
		window.location = "http://www.dmc.go.com/navtoblasthardlogin.html";
    }
}
// evaluate return string
var gLoadGame = false
var setupString = window.location.toString();
if (setupString.indexOf("?gAppName=")!=-1){
    var startLoc = setupString.indexOf("?gAppName=")+10
    var endLoc = setupString.indexOf("&gTarget=");
    gAppName = setupString.substring(startLoc, endLoc)
    startLoc = setupString.indexOf("&gTarget=")+9
    endLoc = setupString.indexOf("&gCoins=")
    gTarget = setupString.substring(startLoc, endLoc)
    startLoc =  setupString.indexOf("&gCoins=")+8
    endLoc = setupString.length;
    gCoins = setupString.substring(startLoc, endLoc)
    gLoadGame = true
}
function manager_OnDownloadUpdate(gameID, bytesDownload, bytesTotal) {
    percentage = Math.floor(bytesDownload / bytesTotal * 100);
    document.movie.TGotoFrame(gTarget + "/bar", percentage);
}
function manager_OnDownloadComplete(gameID) {

}
function manager_OnInstallStart(gameID) {
    document.movie.TGotoLabel(gTarget, "installingFrame");
}
function manager_OnInstallEnd(gameID) {
    document.movie.TGotoLabel(gTarget, "launchingFrame");
    document.manager.SetTokenEnabled(gameID, gCoins);
    installTimer = setInterval('chkInstall()', 2000);
}
function manager_OnGameStart(gameID) {
    //document.movie.TGotoFrame(gTarget, 3);
}
function manager_OnGameEnd(gameID) {
    // code to get rid of querystring
    if (gLoadGame) {
        removeQuerystring();
    }
    document.movie.SetVariable(gTarget + "/:coinswon", getTokenValue(gameID));
    document.movie.TGotoLabel(gTarget, "afterGame");
}
function manager_OnError(errorCode) {
	if(errorCode == 3){
		needsproductlistupdate = true;
	}else{
		//alert("Error Code: " + errorCode);
	}
}
function removeQuerystring() {
        url_array = setupString.split("?");
        no_qs_url = url_array[0];
        window.location.replace(no_qs_url);
}
// token methods
function isTokenEnabled(gameID) {
    
    try {
        return true
    }
    catch (e) {
        return false
    }
}
function setTokenEnabled(gameID, bEnable) {

    try {    
        manager.SetTokenEnabled(gameID, bEnable);
    }
    catch (e) {
        alert("This feature is not supported");
    }
}
function getTokenValue(gameID) {
    try {
       return(manager.GetTokenValue(gameID))
    }
    catch (e) {
        alert("This feature is not supported.");
    }
}
function getTokenScoreValue(gameID) {
    try {
        alert(manager.GetTokenScoreValue(gameID));
    }
    catch (e) {
        alert("This feature is not supported");
    }
}
function resetTokenValues(gameID) {
    
    try {
        manager.ResetTokenValues(gameID);
    }
    catch (e) {
        alert("This feature is not supported");
    }
}
// BlastPhase1 methods
function removeGame(gameID){
    document.manager.UninstallGame(gameID, true)
}
function chkInstall(){
    if (document.manager.LaunchGame(gAppName, true)){
        clearInterval(installTimer);
    }
}
function navToGameManagerInstall(){
    window.location = "http://www.disneyblast.go.com/v3/setup/gamemanagerinstaller.html?returl=" + window.location + "&gAppName=" + gAppName + "&gTarget=" + gTarget + "&gCoins=" + gCoins
}
function chkFlashGameLauncher(){
    if (gLoadGame){
        configFlash()
    }
}
function flashInstallGame(){
    document.manager.InstallGame(gAppName, true);
    document.movie.TGotoLabel(gTarget, "downloadingFrame");
}
function configFlash(){
    document.movie.SetVariable("/:gAppName", gAppName);
    document.movie.SetVariable("/:gTarget", gTarget);
    document.movie.SetVariable("/:gCoins", gCoins);
    document.movie.TCallLabel("/", "loadgameframe");
}
function configExe(gameID, targ, coins){
    gAppName = gameID
    gTarget = targ
    gCoins = coins
    if(writeInstallObj){
        initExe(gameID, targ, coins)
    }else{
        document.movie.TGotoLabel(gTarget, "getParents");
    }
}

function initExe(gameID, targ, coins) {
    if (document.manager.IsGameInstalled(gameID)){
        document.manager.SetTokenEnabled(gameID, coins);
        resetTokenValues(gameID);
        document.movie.TGotoLabel(gTarget, "launchingFrame");
        document.manager.LaunchGame(gameID, true);
    }else{
		if(needsproductlistupdate == true){
			if(cookieVal("attemptedproductlistupdate") == "true"){
				document.movie.TGotoLabel(gTarget, "gameunavailable");
			}else{
				document.movie.TGotoLabel(gTarget, "updateproductlist");
			}
		}else{
	        document.movie.SetVariable("/:gLoadGame", gLoadGame);
	        document.movie.TGotoLabel(gTarget, "bandDecision");
		}
    }
}
function navToUpdateProductList(){
	window.location = "http://www.disneyblast.go.com/v3/setup/updateproductlist.html?retURL=" + escape(window.location) + "&gAppName=" + gAppName + "&gTarget=" + gTarget + "&gCoins=" + gCoins
} 
  // -->
</script>

<SCRIPT LANGUAGE="javascript" FOR="manager" EVENT="OnGameStart(gameID)">
manager_OnGameStart(gameID);
</SCRIPT>
<SCRIPT LANGUAGE="javascript" FOR="manager" EVENT="OnGameEnd(gameID)">
manager_OnGameEnd(gameID);
</SCRIPT>
<SCRIPT LANGUAGE="javascript" FOR="manager" EVENT="OnDownloadUpdate(gameID, bytesDownload, bytesTotal)">
manager_OnDownloadUpdate(gameID, bytesDownload, bytesTotal);
</SCRIPT>
<SCRIPT LANGUAGE="javascript" FOR="manager" EVENT="OnDownloadComplete(gameID)">
manager_OnDownloadComplete(gameID);
</SCRIPT>
<SCRIPT language=javascript event=OnInstallStart(gameID) for=manager>
manager_OnInstallStart(gameID);
</SCRIPT>
<SCRIPT language=javascript event=OnInstallEnd(gameID) for=manager>
manager_OnInstallEnd(gameID);
</SCRIPT>
<SCRIPT language=javascript event=OnGameStart(gameID) for=manager>
manager_OnGameStart(gameID);
</SCRIPT>
<SCRIPT language=javascript event=OnGameEnd(gameID) for=manager>
manager_OnGameEnd(gameID);
</SCRIPT>
<SCRIPT LANGUAGE="javascript" FOR="manager" EVENT="OnError(errorCode)">
manager_OnError(errorCode);
</SCRIPT>
</HEAD>
<BODY bgcolor="#003366" scroll=no>

<script language="javascript" type="text/javascript">
	<!-- START FLASH MOVIE -->
	flashObj = new FlashObj("http://www.disneyblast.go.com/v3/global/coreblast.swf", "100%", "100%", "#ffffff", "7", "movie", "configbas=http://www.disneyblast.go.com/v3&configloc=/text/homepage/today.xml");
	flashObj.render(true,"opaque");
	<!-- END FLASH MOVIE -->
	<!-- WRITE GAMEMANAGER OBJECT -->
	if(writeInstallObj){
		writeGameManagerTag();
	}
</script>



</BODY>
</HTML>